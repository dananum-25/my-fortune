/* ===============================
   BASE
================================ */
*{ box-sizing:border-box; }

body{
  margin:0;
  background:#0b0b0f;
  color:#fff;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
}

body.lock-scroll{ overflow:hidden; }

.hidden{ display:none !important; }

/* ===============================
   TOP BAR
================================ */
.topbar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:12px 14px;
}

.brand{
  font-weight:800;
  letter-spacing:.2px;
}

#soundToggle{
  font-size:14px;
  padding:8px 12px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.15);
  background:rgba(255,255,255,.06);
  color:#fff;
}

/* ===============================
   QUESTION HERO (ê³ ì–‘ì´ + ì§ˆë¬¸)
================================ */
.cat-area{
  text-align:center;
  padding:14px 16px 6px;
}

.cat-area::before{
  content:"";
  display:block;
  width:100%;
  max-width:420px;
  height:260px;
  margin:0 auto 14px;
  background:
    url("/assets/cat_ai.webp")
    center / contain no-repeat;
  border-radius:18px;
}

/* ì§ˆë¬¸ í…ìŠ¤íŠ¸ */
#catText{
  margin:10px 0 14px;
  font-size:26px;  
  line-height:1.25;
  font-weight:900;
  letter-spacing:-0.4px;
}

/* ===============================
   QUESTION BUTTONS (í° ë²„íŠ¼)
================================ */
#questionArea{
  margin-top:10px;
}

#questionArea button{
  display:block;
  width:100%;
  margin:12px 0;
  padding:20px 16px;
  border-radius:18px;
  border:none;
  background:#1e1e2a;
  color:#fff;
  font-size:20px;
  font-weight:800;
  letter-spacing:-0.3px;
  transition:transform .15s ease, background .15s ease;
}

#questionArea button:active{
  transform:scale(0.97);
  background:#2a2a3a;
}

/* ===============================
   TRANSITION
================================ */
.transition{
  padding:14px;
  text-align:center;
}

.transition p{
  font-size:20px;
  font-weight:800;
  margin:10px 0 14px;
}

.transition button{
  width:100%;
  padding:18px;
  border-radius:16px;
  border:none;
  background:#f5f5f7;
  color:#111;
  font-size:18px;
  font-weight:900;
}

/* ===============================
   BIG CARD STAGE
================================ */
.tarot-stage{
  padding:8px 10px 0;
}

#bigCardStage{
  position:sticky;
  top:0;
  z-index:40;
  padding-top:8px;
  padding-bottom:12px;
  background: radial-gradient(circle at top,
    rgba(0,0,0,.6),
    rgba(0,0,0,0));
}

.big-cards{
  position:relative;
  width:100%;
  max-width:420px;
  aspect-ratio:3 / 4;
  margin:8px auto 0;
}

/* ê¸°ë³¸ ì¹´ë“œ */
.big-card{
  position:absolute;
  width:32vw;
  max-width:140px;
  aspect-ratio:2 / 3;
  border-radius:14px;
  background:url("/assets/tarot/back.png")
    center / 100% 100% no-repeat;
  filter:drop-shadow(0 10px 22px rgba(0,0,0,.55));
  backface-visibility:hidden;
}

/* ìŠ¬ë¡¯ ìœ„ì¹˜ */
.slot-2{ left:0%;   top:0%; }
.slot-1{ left:33%;  top:0%; }
.slot-3{ left:66%;  top:0%; }

.slot-6{ left:33%;  top:32%; }

.slot-4{ left:0%;   top:64%; }
.slot-7{ left:33%;  top:64%; }
.slot-5{ left:66%;  top:64%; }

/* ë²„ì „ë³„ í¬ê¸° */
.big-cards.v3-layout .big-card{ width:36%; }
.big-cards.v5-layout .big-card{ width:32%; }
.big-cards.v7-layout .big-card{ width:30%; }

.big-cards.v1-layout .big-card{
  width:60%;
  left:20%!important;
  top:18%!important;
}

/* ===============================
   PICKER (78ì¥)
================================ */
.picker{
  padding:8px 12px 0;
}

.picker-title{
  margin:10px 0 8px;
  font-size:26px;
  font-weight:900;
  letter-spacing:-.4px;
}

.grid78{
  display:grid;
  grid-template-columns:repeat(6,1fr);
  gap:8px;
  max-height:34vh;
  overflow-y:auto;
}

.pick{
  width:100%;
  aspect-ratio:2 / 3;
  background:url("/assets/tarot/back.png")
    center / contain no-repeat;
  border-radius:10px;
  transition:transform .25s ease, opacity .35s ease;
}

.pick.sel{
  outline:2px solid gold;
  outline-offset:2px;
  transform:translateY(-2px);
}

.pick.fade{
  opacity:0;
  transform:scale(.85);
}

/* ===============================
   REORDER (âœ… FINAL FIX)
   êµ¬ì¡°: 213 / ..6.. / 475
   - bigCardStage ë°”ë¡œ ì•„ë˜ì— ë¶™ìŒ
================================ */

/* âœ… bigCardStage ê¸°ì¤€ìœ¼ë¡œ ì•„ë˜ì— ë¶™ê²Œ */
#bigCardStage{
  position: relative; /* í˜¹ì‹œ ì—†ìœ¼ë©´ ì•ˆì „í•˜ê²Œ í•œë²ˆ ë” ì„ ì–¸ */
}

/* âœ… ë¹…ì¹´ë“œ ë°”ë¡œ ì•„ë˜ */
#reorderStage{
  position: absolute;
  top: 100%;                 /* ğŸ”¥ bigCardStage ì•„ë˜ */
  left: 50%;
  transform: translateX(-50%);
  width: 100%;
  max-width: 420px;
  margin-top: 12px;
  z-index: 30;
  pointer-events: none;
}

/* ===============================
   REORDER STAGE (ì¶•ì†Œ / ì´í™íŠ¸ìš©)
================================ */

#reorderStage{
  position: relative;
  margin: 6px auto 0;
  width: 100%;
  max-width: 420px;
  pointer-events: none;
}

/* ì¬ì •ë ¬ ì¹´ë“œ ìº”ë²„ìŠ¤ */
#reorderStage .reorder-cards{
  position: relative;
  width: 100%;
  max-width: 360px;
  aspect-ratio: 3 / 4;
  margin: 0 auto;
}

/* ğŸ”¥ ì¬ì •ë ¬ ì¹´ë“œ (ì‘ê²Œ) */
.reorder-card{
  position: absolute;
  width: 18%;          /* ğŸ”¥ ì‘ê²Œ */
  aspect-ratio: 2 / 3;
  background: url("/assets/tarot/back.png") center / contain no-repeat;
  filter: drop-shadow(0 6px 12px rgba(0,0,0,.45));
  opacity: 0;
}

/* âœ… ìŠ¬ë¡¯ ì¢Œí‘œ: 2 1 3 / . 6 . / 4 7 5 */
.reorder-card.slot-2{ left: 0%;   top: 0%; }
.reorder-card.slot-1{ left: 33%;  top: 0%; }
.reorder-card.slot-3{ left: 66%;  top: 0%; }

.reorder-card.slot-6{ left: 33%;  top: 32%; }

.reorder-card.slot-4{ left: 0%;   top: 64%; }
.reorder-card.slot-7{ left: 33%;  top: 64%; }
.reorder-card.slot-5{ left: 66%;  top: 64%; }

/* âœ… 78ì¥ ì¹´ë“œ(ê·¸ë¦¬ë“œ)ì™€ ê²¹ì¹¨ ë°©ì§€ */
#spreadSection{
  margin-top: 160px; /* í•„ìš”í•˜ë©´ 140~190 ì¡°ì ˆ */
}
/* ===============================
   MODAL
================================ */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.7);
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:9999;
}

.modal-card{
  width:min(86vw,360px);
  background:#1a1a1f;
  padding:18px;
  border-radius:16px;
  text-align:center;
  border:1px solid rgba(255,255,255,.1);
}

.modal-card button{
  width:100%;
  padding:14px;
  border-radius:12px;
  border:none;
  background:#f5f5f7;
  color:#111;
  font-weight:900;
}

/* ===============================
   FIRE EFFECT
================================ */
.fireball{
  position:fixed;
  width:42px;
  height:42px;
  border-radius:50%;
  background:radial-gradient(circle,
    #fff1c1,
    #ffb703,
    #ff5400,
    #b5179e);
  box-shadow:
    0 0 25px rgba(255,180,0,.9),
    0 0 45px rgba(255,80,0,.8);
  z-index:9998;
  pointer-events:none;
}

.big-card.burning::before{
  content:"";
  position:absolute;
  inset:-20%;
  background:radial-gradient(circle,
    rgba(255,200,80,.9),
    rgba(255,120,0,.7),
    transparent 70%);
  animation:burnPulse 2s ease-in-out forwards;
  border-radius:18px;
}

@keyframes burnPulse{
  0%{ opacity:.3; }
  100%{ opacity:.8; }
}

/* ===============================
   CHAT
================================ */
.chat{
  padding:14px;
}

.reading-result{
  margin-top:10px;
  padding:14px;
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.1);
  border-radius:16px;
}
